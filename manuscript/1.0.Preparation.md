# Preparation

## Linux: Back to Basics

{pagebreak}

### Commands

#### Internal and External Commands

`type` 
: shows if the command is internal or internal.

`set` / `unset`
: sets a local / global variable and displays existing variables.

`env`
: displays existing global variables.

`echo` 
: displays whatever text you enter after it.The echo command can be also used to print contents of a specific variable when used with $.

`history` 
: displays commands typed. .bash_history stores commands typed.

`man` 
: displays information about the command.

`info` 
: displays information about the command in hypertext.

`help` 
: displays information about builtin and external commands.

`whatis` 
: contains a short description of each man page. same as man -k.

#### Processing Text with Filters

`cat` 
: used to combine files and to display information within a file.

`tac` 
: similar to cat but uses the reverse order.

`join` 
: combines two files by matching the contents of specified fields within the files.





#### Redirection Operators

`tee`
: displays the standard output and saves it to a file at the same time.

`xargs` 
: reads items from standard input as separated by blanks and executes a  command once for each argument. Commonly used with the find command.

`“` (backtick)
: Text within backticks is treated as a separate command whose results are substituted on the command line. It first executes what is inside the backtick then passes to the other command.

`$ ()` 
: Being used more often than backtick nowadays





#### Sequence Commands

`;`
: Executes the command even if it is not correct.

`&&`
: stops executing the comand if it is not correct. 

`||`
: If the comand is correct it stops executing. Just like the OR operator.

`!!`
: executes the last history command.

`!<history number>`
: executes the command number in history.

- STDIN (0) – standard input – keyboard

- STDOUT (1) – standard output – screen

- STDERR (2) – standard error – screen  


### Handling Files

#### File Location
 
`find`
: The find utility implements a brute-force approach to finding files. This program finds files by searching through the specified directory tree,checking filenames, file creation dates, and so on to locate the files that match the specified criteria.

> A>  ___**Options**___\\
> A>  `.(dot)` option within a directory will show all files within a directory and sub-directory.\\
> A>  `-name` option searches for a specific file.\\
> A>  `-user` option searches for files created by an specific user.
   
`locate` 
: Used to search files. Faster than find as it uses a database. This database is located at /etc/updatedb.conf.

> A>  ___**Options**___\\
> A>  `-n` option is used to specify the number of files that should be located.\\
> A>  `–i` option ignores the case sensitive.\\
> A>  `–S` shows the status of the database.\\
> A>  `–updatedb` updates the mlocate database.

`whereis`
: This command is helpful to locate binary, source and manual pages o commands in the  Linux system.  The `whereis` program searches for files in a restricted set of locations, such as standard binary file directories, library directories, and man page directories.  This tool does not search user directories or many other locations that are easily searched by find or locate. The `whereis` utility is a quick way to find program executable and related files like documentation or configuration files. 

- The `whereis` program returns filenames that begin with whatever you type as a search criterion, even if those filenames contain extensions.  This feature often turns up configuration files in /etc, man pages, and similar files

- `which` - Considered a search command, which is very weak; it merely searches your path for the command that you type and lists the complete  path to the first match it finds. It’s useful if you need to know the complete path for some reason.


#### File Management

`cp` 
: used to copy files,directories and rename files.

> A>  **Options**\\
> A>  `-i` option checks if the files already exists before copying it.\\
> A>  `-r` option is used to copy directories.\\
> A>  `-p`(preserve) keep the date and time the file / directory was created.\\
> A>  `-R` option performs a recursive copy

`mv` 
: Used to move files and directories.

> A>  **Options**\\ 
> A>  `-p` / –preserve\\
> A>  `-R` / –recursive\\
> A>  `-a` / –archive are not available.

`touch`
: creates a new file.

`rm` 
: Used to remove files and directories.

> A>  **Options**\\
> A>  `-r` option removes directories recursively\\
> A>  `-d` option removes empty directory

`rmdir` 
: Used to remove empty directories.

`mkdir` 
: Used to create a new directory.

> A>  **Options**\\
> A>  `-p` option is used to create more than one directory.

#### File Summarizing Commands

`cut` 
: used to cut sections from each line of files and writing the result to standard output.

> A>  **Options**\\
> A>  -c option cuts by character.\\
> A>  -b option cuts by byte.\\
> A>  -d option cuts by delimiter. Option -f must be used.

`grep `
: used to search text. It searches the given file for lines containing a match to the given strings or words.

> A>  **Options**\\
> A>  -E option uses extended regex.\\
> A>  -i option ignores case sensitive.\\
> A>  -r option perform recursive search.\\
> A>  -o option show only the part of a line matching PATTERN.

`egrep` 
: The grep command interprets regexp as a basic regular expression by default. To use an extended regular expression, you can pass the -E or –extended-regexp option.  Alternatively, you can call egrep rather than grep. This variant command uses extended regular expressions by default.

`sed` 
: is a powerful text stream editor. Can do insertion, deletion, search and replace(substitution). Supports regular expression which allows it perform complex pattern matching.

> A>  **Options**
> A>  -g(global) option changes more than 1 line.

`cd` 
: changes the directory. 

> A> **Options**\\
> A>  – option takes it back to the previous directory.\\
> A>  .. option takes it back to the parent directory.\\
> A>  ~ option takes to the home directory.

ls 
: list the archives within a directory.

> A> **Options**\\
> A>  `-l` option uses long list format.\\
> A>  `-a` opotion lists hidden files.\\
> A>  `-h` (human) option lists files in kilobites, megabites and gigabites.\\
> A>  `-R` option lists files in recursively.\\
> A>  `-F` option or –classify option appends an indicator code to the end of the filename so that you know what type of file it is.
> A> \\
> A> *The meanings are as follows:*\\
> A>  / - Directory\\ 
> A>  * - Executable \\
> A>  | - Named pipe\\
> A>  = - Socket\\
> A>  @ - Symbolic link\\
> A>  file – shows the file type\\



{aside}
{line-numbers=on,lang=console}
~~~
root@linux:~# file new_file.txt 
ew_file.txt: ASCII text
~~~
{/aside}



#### File Transforming

`expand` 
: convert tabs into spaces in a file and when no file is specified it reads from standard input.

`OD` (Octal Dump) 
: displays the output in octal. using the -t option along with x it will display in hexadecimal. 

`sort` 
: sorts the contents of a text file, line by line in alphabetic order if no option is used. 

> A>  **Options**\
> A>  `-r` option displays in reverse order.

`split` 
: split a file into two or more smaller files. Can be split by line (-l), byte (-b) or size (-C).

`uniq` 
: reports or omits repeated lines as long as they are in sequence. 

> A>  **Options**\
> A>  `–c` option shows the number of times a line is repeated.\\
> A>  `-d` option only prints duplicate lines, one for each group.\\
> A>  `-D` option prints all duplicate lines.File-Viewing Commands\\

`head` 
: shows only the 10 initial lines of a file. Using option -n, it is possible to specify the number of lines to be shown.

`tail` 
: show only the last lines of a file. Using the option -f, the command waits for an input until the file is changed.

`less` 
: used to view (but not change) the contents of a text file at one screen.Used for large files.



### Permissions

#### Controlling Access

##### File type code

`d` [ Directory ]
:  Disk directories are files just like any others, but they contain filenames and pointers to disk inodes.

`b`  
: Block Device - This is a file that corresponds to a hardware device to and from which data is transferred in blocks of more than 1 byte. Disk devices (hard disks, USB flash drives, CD-ROMs, and so on) are common block devices.

`c` 
: Character Device - A file that corresponds to a hardware device to and from which data is transferred in units of 1 byte. Examples include parallel port, RS-232 serial port, and audio devices.

`p` 
: Named Pipe - A pipe enables two running Linux programs to communicate with each other. One opens the pipe for reading, and the other opens it for writing, enabling data to be transferred between the programs.

`s`  
: A socket is similar to a named pipe, but it permits network and bidirectional links.

`–` 
: Regular File - This may be text, an executable program, graphics, compressed data, or just about any other type of data.

`l`
: Symbolic Link  - The file contains the name of another file or directory. When Linux accesses the symbolic link, it tries to read the linked-to file.

`chmod ` 
: Used to change the permission for files and directories.

> A>  `-R` - option changes permission for files and directories recursively.


#####Permission bits

1: `EXECUTE` Permission

2: `WRITE` permission

3: `READ` permission

**Changing permission using bits:**

{aide}
{line-numbers=on,lang=console}
~~~
root@kali:/# chmod -v 764 new_file.txt 
mode of ‘new_file.txt’ changed from 0644 (rw-r–r–) to 0764 (rwxrw-r–)
~~~
{/aside}

#####Symbolic Permission

**Changing permission using symbolic mode:**

{aside}
{line-numbers=on,lang=console}
~~~
root@kali:/# chmod -v a+x new_file.txt 
mode of ‘new_file.txt’ changed from 0764 (rwxrw-r–) to 0775 (rwxrwxr-x)
~~~
{/aside}





### Process Management

{pagebreak}

## Netstat, ss, NETCAT, NCAT

{pagebreak}

### `Netstat`


`netstat` (network statistics)
: is a command line tool for monitoring network connections both incoming and outgoing as well as viewing routing tables, interface statistics etc. It is very useful in terms of network troubleshooting and performance measurement. netstat is one of the most basic network service debugging tools, telling you what ports are open and whether any programs are listening on ports.

> A>  ____**Options**____\\
> A>  a: Show both listening and non-li­ste­ning, and established\\
> A>  t: Show TCP,\\
> A>  n: Show numerical addresses instead of trying to determine symbolic host, port or user names\\
> A>  u: Show UDP\\
> A>  p: Show the PID and name of the program to which each socket belongs.\\
> A>  c: continuos listening

`netstat -an ` 
: Lists all ports (both TCP and UDP)

#### -an example

{line-numbers=on,lang=console}
~~~
root@kali: netstat -an 
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN
tcp        0      0 192.168.0.109:22        192.168.0.110:58602     ESTABLISHED
tcp6       0      0 :::22                   :::*                    LISTEN
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node   Path
unix  2      [ ACC ]     STREAM     LISTENING     17413    /tmp/.X11-unix/X0
unix  2      [ ACC ]     STREAM     LISTENING     14578    @irqbalance426.sock
unix  2      [ ACC ]     STREAM     LISTENING     17412    @/tmp/.X11-unix/X0
unix  2      [ ACC ]     STREAM     LISTENING     19543    @/tmp/.X11-unix/X1
~~~


`netstat -antp` 
: Lists only TCP (Transmission Control Protocol) port connections:

#### -antp example

{line-numbers=on,lang=console}
~~~
root@jp_ubuntu:~# netstat -antp
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      3601/vmware-hostd
tcp        0      0 0.0.0.0:902             0.0.0.0:*               LISTEN      3593/vmware-authdla
tcp        0      0 127.0.0.1:7827          0.0.0.0:*               LISTEN      4753/python
~~~

`netstat -anup`
: Lists only UDP (User Datagram Protocol) port connections

{line-numbers=on,lang=console}
~~~
root@jp_ubuntu:~# netstat -anup
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
udp      768      0 0.0.0.0:35033           0.0.0.0:*                           4155/chrome
udp     2624      0 192.168.0.106:52981     64.233.190.189:443      ESTABLISHED 4155/chrome
~~~


`netstat -l`
: Lists all active listening ports. 

`netstat – lnxp`
: Lists all active UNIX listening ports.

`netstat -lnup`
: Lists all active udp listeninig ports.


`netstat –lntp`  
: Lists all active tcp listeninig.

#### -lntp example

{line-numbers=on,lang=console}
~~~
root@jp_ubuntu:~# netstat -lntp
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      3601/vmware-hostd
tcp        0      0 0.0.0.0:902             0.0.0.0:*               LISTEN      3593/vmware-authdla
tcp        0      0 127.0.0.1:7827          0.0.0.0:*               LISTEN      4753/python
tcp        0      0 127.0.0.1:8307          0.0.0.0:*               LISTEN      3601/vmware-hostd
~~~

`netstat -s`
: Displays statistics by protocol. By default, statistics are shown for the TCP, UDP, ICMP, and IP protocols. The -s parameter can be used to specify a set of protocols.

`netstat -su`
: Displays statics for udp.

`netstat -st`
: Displays statics for tcp.

`netstat -4`
: Displays active connections for ipv4.

`nestat -4ntp`
: Displays active connections for ipv4 listenning on tcp ports.

#### -4ntp example

{line-numbers=on,lang=console}
~~~
root@jp_ubuntu:~# netstat -4ntp
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 192.168.0.110:55428     64.233.190.188:5228     ESTABLISHED 4155/chrome
tcp        0      0 192.168.0.110:46280     172.217.30.112:80       ESTABLISHED 4155/chrome
tcp        0      0 192.168.0.110:53472     151.101.194.217:443     ESTABLISHED 869/snapd
~~~


`netstat -ac`
: Displays Promiscuous mode with -ac switch. Default screen refresh in every second.

`netstat -actnp 5`
: refreshes every 5 seconds for all tcp ports.

`netstat -lctnp 5`
: refreshes every 5 seconds for all tcp listening ports.

`netstat -ie`
: Displays information about network interfaces. Similar to ifconfig.

`netstat -r`
: Displays Kernel IP routing table with netstat and route command.

`netstat -i`
: Displays network interface packet transactions including both transferring and receiving packets with MTU size.

`netstat -ic 5`
: refreshes every 5 seconds.





### `ss`

`ss` (Socket Statistic)
: similar to netstat, in that it is used to display useful network socket information.

`ss -lntp`
: same as netstat -lntp

`ss -lnup`
: same as netstat -lnup

`ss -4ntp`
: same as nestat -4ntp




### NETCAT

`netcat`
: It is a tool that can read and write to TCP and UDP ports.


### NCAT




## Wireshark


## Shell





